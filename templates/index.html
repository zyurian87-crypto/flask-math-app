<!DOCTYPE html>
<html lang='ja'>
<head>
    <meta charset='UTF-8'>
    <title>高校の計算プリント</title>
    <style>

        body {font-family: 'UD デジタル N-B', sans-serif; }
    .container { width: 180mm; margin: 20mm auto; }
    h1 {text-align: center; border-bottom: 2px solid black; padding-bottom: 10px; }
    .meta { display: flex; justify-content: space-between; font-size: 1.2em; margin-bottom: 20px; }
    .answer-list { column-count: 2; font-size: 1.1em; }
    .page-break{
        break-before: page;
    }
        ol.question-list li.question-item {
            list-style: none;
            padding-left: 0;
            counter-reset: none;
            margin-bottom: 10px;
    }
        ol.question-list li.question-item::before {
        content: "";
        display: none;
    }

    </style>
</head>
<body>
    <div class='container'>
        <h1> 高校の計算プリント </h1>

        <form method="post">
            <label for="num_problems">問題を何問にしますか？</label>
            <input type='number' id='num_problems' name='num_problems' value='10' min='1' max='100'>

            <fieldset style='margin-top:15px; border: 1px solid #ccc; padding: 10px; border-radius: 5px;'>
                <legend>問題のジャンルを選択:</legend>
                <div style="margin-bottom: 5px;">
                    <input type="radio" id="genre_cubed" name="genre" value="cubed" {% if selected_genre == 'cubed' %}checked{% endif %}>
                    <label for="genre_cubed">３乗の展開</label>
                </div>
                <div style="margin-bottom: 5px;">
                    <input type="radio" id="genre_division" name="genre" value="division" {% if selected_genre == 'division' %}checked{% endif %}>
                    <label for="genre_division">文字式の割り算</label>
                </div>
                <div>
                    <input type='radio' id='genre_mixed' name='genre' value='mixed' {% if selected_genre == 'mixed' %}checked{% endif %}>
                    <label for='genre_mixed'>ミックス（両方から出題）</label>
                </div>
            </fieldset>
            <input type="submit" value="プリント作成" style='margin-top: 15px; padding: 5px 10px;'>
        </form>
        <hr>

        {% if problems %}
            <div class="meta"><span>名前:______________</span><span>点数:_____</span><span>かかった時間____分_______秒</span></div>
            <p class="instruction">以下の式を展開しなさい。</p>
            <ol class="question-list"
                {% for q in problems %}
                    <li class="question-item">{{ q }} =</li>
                {% endfor %}
            </ol>

            <div class="page-break"></div>
            <h1>答え</h1>
            <ol class="answer-list">
                {% for ans in answers %}
                    <li>{{ ans }}</li>
                {% endfor %}
            </ol>
        {% endif %}
    </div>

</body>
</html>
